# Knowledge System Configuration
# è‡ªå‹•çŸ¥è­˜è“„ç©ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

# GitHub Actions è¨­å®š
github_actions:
  # çŸ¥è­˜ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’å®Ÿè¡Œã™ã‚‹PRã®æ¡ä»¶
  trigger_conditions:
    - merged: true
    - target_branch: "main"
    - exclude_labels: ["skip-knowledge-capture", "documentation"]

  # è‡ªå‹•PRä½œæˆè¨­å®š
  auto_pr:
    enabled: true
    title_template: "ğŸ¤– Knowledge Update: Lessons from PR #{{pr_number}}"
    branch_prefix: "auto/knowledge-update-"
    labels: ["auto-generated", "documentation", "knowledge-update"]
    auto_merge: true # ã‚¹ãƒ†ã‚¢ãƒªãƒ³ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã®å¤‰æ›´æ™‚

  # çŸ¥è­˜æ›´æ–°ã®å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
  knowledge_files:
    lessons: ".kiro/steering/lessons.md"
    patterns: ".kiro/steering/patterns.md"
    challenges: ".kiro/steering/challenges.md"

# çŸ¥è­˜ã‚­ãƒ£ãƒ—ãƒãƒ£è¨­å®š
capture_settings:
  # åˆ†æå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­
  file_extensions:
    - ".tsx"
    - ".ts"
    - ".js"
    - ".jsx"
    - ".css"
    - ".md"

  # é™¤å¤–ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
  exclude_directories:
    - "node_modules"
    - ".git"
    - "dist"
    - "build"
    - ".next"

  # æœ€å°å¤‰æ›´è¡Œæ•°ï¼ˆã“ã‚Œä»¥ä¸‹ã¯çŸ¥è­˜ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ãªã„ï¼‰
  min_lines_changed: 10

  # è‡ªå‹•ã‚¿ã‚°ç”Ÿæˆ
  auto_tagging:
    enabled: true
    categories:
      - "UI"
      - "Logic"
      - "Performance"
      - "Accessibility"
      - "Responsive"
      - "Mobile"
      - "Desktop"
      - "Animation"
      - "Forms"
      - "Navigation"

# ãƒ‘ã‚¿ãƒ¼ãƒ³æŠ½å‡ºè¨­å®š
pattern_extraction:
  # TypeScript/React ãƒ‘ã‚¿ãƒ¼ãƒ³
  react_patterns:
    - "custom_hooks" # use* ã§å§‹ã¾ã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
    - "component_props" # interface *Props ã®å®šç¾©
    - "styled_variants" # tailwind-variants ã®ä½¿ç”¨
    - "event_handlers" # ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ‘ã‚¿ãƒ¼ãƒ³

  # CSS/Tailwind ãƒ‘ã‚¿ãƒ¼ãƒ³
  css_patterns:
    - "responsive_classes" # ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚¯ãƒ©ã‚¹
    - "layout_patterns" # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³
    - "animation_classes" # ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹

  # å†åˆ©ç”¨æ€§ã®åˆ¤å®šåŸºæº–
  reusability_threshold:
    high: 3 # 3å›ä»¥ä¸Šä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³
    medium: 2 # 2å›ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³
    low: 1 # 1å›ã®ã¿ã®ä½¿ç”¨

# èª²é¡Œæ¤œå‡ºè¨­å®š
challenge_detection:
  # æ¤œå‡ºå¯¾è±¡ã®ãƒ‘ã‚¿ãƒ¼ãƒ³
  error_patterns:
    - "try.*catch"
    - "console\\.(error|warn)"
    - "TODO|FIXME|HACK"
    - "\\.preventDefault\\(\\)"

  # ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰èª²é¡Œã‚’æ¤œå‡º
  commit_message_keywords:
    - "fix"
    - "bug"
    - "issue"
    - "problem"
    - "error"
    - "broken"

  # é›£æ˜“åº¦åˆ¤å®šåŸºæº–
  difficulty_indicators:
    hard:
      - "performance"
      - "accessibility"
      - "cross-browser"
      - "mobile"
    medium:
      - "responsive"
      - "animation"
      - "form"
    easy:
      - "styling"
      - "text"
      - "color"

# ä»•æ§˜å¼·åŒ–è¨­å®š
spec_enhancement:
  # é¡ä¼¼æ€§åˆ¤å®šã®é–¾å€¤
  similarity_threshold: 0.7

  # è‡ªå‹•ææ¡ˆã™ã‚‹è¦ç´ 
  auto_suggestions:
    - "performance_considerations"
    - "accessibility_requirements"
    - "responsive_design"
    - "error_handling"
    - "test_cases"

  # å¼·åŒ–å¯¾è±¡ã®ä»•æ§˜ãƒ•ã‚¡ã‚¤ãƒ«
  target_files:
    - "requirements.md"
    - "design.md"
    - "tasks.md"

# å“è³ªç®¡ç†è¨­å®š
quality_control:
  # é‡è¤‡æ¤œå‡º
  duplicate_detection:
    enabled: true
    similarity_threshold: 0.8

  # è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  auto_cleanup:
    enabled: true
    archive_after_days: 90 # 90æ—¥å¾Œã«å¤ã„è¨˜éŒ²ã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
    max_entries_per_file: 50 # 1ãƒ•ã‚¡ã‚¤ãƒ«ã‚ãŸã‚Šã®æœ€å¤§ã‚¨ãƒ³ãƒˆãƒªæ•°

  # ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯
  quality_checks:
    - "required_fields_present" # å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å­˜åœ¨ç¢ºèª
    - "code_snippets_valid" # ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®æ§‹æ–‡ç¢ºèª
    - "links_accessible" # å‚è€ƒè³‡æ–™ãƒªãƒ³ã‚¯ã®æœ‰åŠ¹æ€§ç¢ºèª

# é€šçŸ¥è¨­å®š
notifications:
  # Slacké€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  slack:
    enabled: false
    webhook_url: ""
    channel: "#development"

  # Discordé€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  discord:
    enabled: false
    webhook_url: ""

  # GitHub Issueä½œæˆï¼ˆå•é¡Œæ¤œå‡ºæ™‚ï¼‰
  github_issues:
    enabled: true
    labels: ["knowledge-system", "quality-issue"]

# ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨­å®š
metrics:
  # è¿½è·¡ã™ã‚‹æŒ‡æ¨™
  tracked_metrics:
    - "pattern_reuse_rate" # ãƒ‘ã‚¿ãƒ¼ãƒ³å†åˆ©ç”¨ç‡
    - "implementation_speed" # å®Ÿè£…é€Ÿåº¦ã®æ”¹å–„
    - "knowledge_base_growth" # çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã®æˆé•·ç‡
    - "similar_issues_reduction" # é¡ä¼¼å•é¡Œã®æ¸›å°‘ç‡

  # ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
  reporting:
    enabled: true
    frequency: "weekly" # weekly/monthly
    output_format: "markdown" # markdown/json
